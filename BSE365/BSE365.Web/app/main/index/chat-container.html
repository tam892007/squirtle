<div class="chat-container" ng-controller="chatController" ng-show="isHubInitialed()">
    <div class="chat-control" ng-show="!isShowNewChatWith">
        <button class="btn btn-success" ng-click="isShowNewChatWith = true">
            <span class="glyphicon glyphicon-plus"></span>
        </button>
    </div>
    <div class="chat-control new-chat" ng-show="isShowNewChatWith">
        <input class="form-control" ng-model="newChatWith" placeholder="chat with account" />
        <button class="btn btn-success"
                ng-enter="newChat(newChatWith); newChatWith =''; isShowNewChatWith = false;"
                ng-click="newChat(newChatWith); newChatWith =''; isShowNewChatWith = false;">
            <span class="glyphicon glyphicon-plus"></span>
        </button>
    </div>
    <div ng-repeat="withAccount in messageData.chatData">
        <div class="panel panel-success">
            <div class="panel-heading">
                <span class="glyphicon glyphicon-user"></span> <span data-ng-bind="withAccount.account"></span>
                <button type="button" class="close" ng-click="closeChat(withAccount)">
                    <span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
                </button>
            </div>
            <div class="panel-body">
                <ul class="chat-message-container">
                    <li ng-repeat="message in withAccount.messages">
                        <span class="message-sender" data-ng-bind="message.Owner"></span>:
                        <span class="message-message" data-ng-bind="message.Messsage"></span>
                    </li>
                    <li id="end-of-{{withAccount.account}}"></li>
                </ul>
            </div>
            <div class="panel-footer">
                <input class="" placeholder="&nbsp;&nbsp;type a message"
                       ng-model="withAccount.newMessage"
                       ng-enter="sendMessageTo(withAccount);"
                       ng-focus="onfocus(withAccount)"
                       ng-blur="onblur(withAccount)" />
                <button class="btn btn-success right" ng-click="sendMessageTo(withAccount);"><span class="glyphicon glyphicon-share"></span></button>
            </div>
        </div>
    </div>
</div>