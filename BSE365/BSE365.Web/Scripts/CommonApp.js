var commonApp=angular.module("commonApp",["ngResource","ui.router","ui.bootstrap"]),serviceBase="http://localhost:2736/";commonApp.constant("ngAuthSettings",{apiServiceBaseUri:serviceBase,clientId:"SHARE"}),commonApp.constant("recaptchaSettings",{publicKey:"6LcFKCETAAAAAN6JPAwzot2fExNpZUumgKXj Jugq"}),commonApp.constant("filterSetting",{pagination:{template:"template/smart-table/pagination.html",itemsByPage:30,displayedPages:10},search:{delay:400,inputEvent:"input"},select:{mode:"single",selectedClass:"st-selected"},sort:{ascentClass:"st-sort-ascent",descentClass:"st-sort-descent",descendingFirst:!1,skipNatural:!1,delay:300},pipe:{delay:100}}),angular.module("smart-table").directive("stPaginationScroll",["$timeout",function(e){return{require:"stTable",link:function(t,n,a,i){var r=100,c=i.tableState().pagination,o=50,l=400,u=function(){i.slice(c.start+r,r)},s=null,g=9999999,d=angular.element(n.parent());d.bind("scroll",function(){var t=d[0].scrollHeight-(d[0].clientHeight+d[0].scrollTop);o>t&&0>t-g&&(null!==s&&e.cancel(s),s=e(function(){u(),s=null},l)),g=t})}}}]).directive("pageSelect",function(){return{restrict:"E",template:'<input type="text" class="select-page" ng-model="inputPage" ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 500, \'blur\': 0 } }" ng-change="selectPage(inputPage)">',link:function(e,t,n){e.$watch("currentPage",function(t){e.inputPage=t})}}});var underscore=angular.module("underscore",[]);underscore.factory("_",function(){return window._}),commonApp.directive("ngConfirmClick",[function(){return{restrict:"A",link:function(e,t,n){t.bind("click",function(){var t=n.ngConfirmMessage;t&&confirm(t)&&e.$apply(n.ngConfirmClick)})}}}]),commonApp.directive("ngReallyClick",["$uibModal",function(e){var t=["$scope","$uibModalInstance",function(e,t){e.ok=function(){t.close()},e.cancel=function(){t.dismiss("cancel")}}];return{restrict:"A",scope:{ngReallyClick:"&"},link:function(n,a,i){a.bind("click",function(){var a=i.ngReallyMessage||"Are you sure ?",r='<div class="modal-body">'+a+"</div>";r+='<div class="modal-footer"><button class="btn btn-primary" ng-click="ok()">OK</button><button class="btn btn-warning" ng-click="cancel()" >Close</button></div>';var c=e.open({template:r,controller:t});c.result.then(function(){n.ngReallyClick()},function(){})})}}}]),commonApp.directive("httpSrc",["$http",function(e){return{link:function(t,n,a){function i(){t.objectURL&&URL.revokeObjectURL(t.objectURL)}t.$watch("objectURL",function(e){n.attr("src",e)}),t.$on("$destroy",function(){i()}),a.$observe("httpSrc",function(n){i(),n&&0===n.indexOf("data:")?t.objectURL=n:n&&e.get(n,{responseType:"arraybuffer"}).then(function(e){var n=new Blob([e.data],{type:e.headers("Content-Type")});t.objectURL=URL.createObjectURL(n)})})}}}]),commonApp.directive("syncFocusWith",["$timeout",function(e){return{restrict:"A",scope:{focusValue:"=syncFocusWith"},link:function(e,t,n){e.$watch("focusValue",function(e,n){1==e?t[0].focus():t[0].blur()})}}}]),commonApp.factory("imageService",["$resource",function(e){return e(":path",{},{getUserPic:{method:"GET",params:{path:"api/image/getUserPicture",id:"@id"}}})}]),angular.module("localization",["LocalStorageModule"]).provider("localize",function(){this.languages=["en-US","vi-VN"],this.defaultLanguage="en-US",this.ext="js",this.baseUrl="i18n/";var e=this;this.$get=["$http","$rootScope","$window","$filter","localStorageService",function(t,n,a,i,r){var c={language:"",dictionary:[],url:void 0,resourceFileLoaded:!1,successCallback:function(e){c.dictionary=e,c.resourceFileLoaded=!0,n.$broadcast("localizeResourcesUpdated")},setLanguage:function(e){c.language=this.fallbackLanguage(e),r.cookie.set("language",c.language),c.initLocalizedResources()},fallbackLanguage:function(t){return t=String(t),e.languages.indexOf(t)>-1?t:(t=t.split("-")[0],e.languages.indexOf(t)>-1?t:e.defaultLanguage)},isCurrentLanguage:function(e){var t=this.fallbackLanguage(e);return t==c.language},setUrl:function(e){c.url=e,c.initLocalizedResources()},buildImgUrl:function(e){return t({method:"GET",url:e,cache:!1})},buildUrl:function(t){if(!c.language){var n=r.cookie.get("language");if(n)c.language=n;else{var i,o;i=a.navigator&&a.navigator.userAgent&&(o=a.navigator.userAgent.match(/android.*\W(\w\w)-(\w\w)\W/i))?o[1]:a.navigator.userLanguage||a.navigator.language,alert(i),c.language=this.fallbackLanguage(i)}}return t+"resources-locale_"+c.language+"."+e.ext},initLocalizedResources:function(){var n=c.url||c.buildUrl(e.baseUrl);t({method:"GET",url:n,cache:!1}).success(c.successCallback).error(function(){var n=e.baseUrl+"resources-locale_default."+e.ext;t({method:"GET",url:n,cache:!1}).success(c.successCallback)})},getLocalizedString:function(e){var t="";if(c.resourceFileLoaded){var n=i("filter")(c.dictionary,function(t){return t.key===e})[0];n||console.log(e),t=n.value?n.value:e}return t}};return c.initLocalizedResources(),c}]}).filter("i18n",["localize",function(e){return function(t){return e.getLocalizedString(t)}}]).directive("i18n",["localize",function(e){var t={restrict:"EAC",updateText:function(t,n,a){var i=n.split("|");if(i.length>=1){var r=e.getLocalizedString(i[0]);if(null!==r&&void 0!==r&&""!==r){if(i.length>1)for(var c=1;c<i.length;c++){var o="{"+(c-1)+"}";r=r.replace(o,i[c])}t[a?"html":"text"](r)}}},link:function(e,n,a){e.$on("localizeResourcesUpdated",function(){t.updateText(n,a.i18n,angular.isDefined(a.i18nHtml))}),a.$observe("i18n",function(e){t.updateText(n,a.i18n,angular.isDefined(a.i18nHtml))})}};return t}]).directive("i18nAttr",["localize",function(e){var t={restrict:"EAC",updateText:function(t,n){var a=n.split("|"),i=e.getLocalizedString(a[0]);if(null!==i&&void 0!==i&&""!==i){if(a.length>2)for(var r=2;r<a.length;r++){var c="{"+(r-2)+"}";i=i.replace(c,a[r])}t.attr(a[1],i)}},link:function(e,n,a){e.$on("localizeResourcesUpdated",function(){t.updateText(n,a.i18nAttr)}),a.$observe("i18nAttr",function(e){t.updateText(n,e)})}};return t}]).directive("i18nImgSrc",["localize",function(e){var t={restrict:"A",link:function(t,n,a){var i=a.i18nImgSrc,r=provider.baseUrl+"/images/"+e.language+"/",c=r+i;e.buildImgUrl(c).success(function(){n[0].src=c}).error(function(){n[0].src=provider.baseUrl+"/images/default/"+i})}};return t}]);