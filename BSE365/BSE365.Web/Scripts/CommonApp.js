var commonApp=angular.module("commonApp",["ngResource","ui.router","ui.bootstrap"]),serviceBase="http://localhost:2736/";commonApp.constant("ngAuthSettings",{apiServiceBaseUri:serviceBase,clientId:"SHARE"}),commonApp.constant("recaptchaSettings",{publicKey:"6LcFKCETAAAAAN6JPAwzot2fExNpZUumgKXj Jugq"}),commonApp.constant("filterSetting",{pagination:{template:"template/smart-table/pagination.html",itemsByPage:30,displayedPages:10},search:{delay:400,inputEvent:"input"},select:{mode:"single",selectedClass:"st-selected"},sort:{ascentClass:"st-sort-ascent",descentClass:"st-sort-descent",descendingFirst:!1,skipNatural:!1,delay:300},pipe:{delay:100}}),angular.module("smart-table").directive("stPaginationScroll",["$timeout",function(e){return{require:"stTable",link:function(t,n,i,a){var c=100,r=a.tableState().pagination,o=50,l=400,u=function(){a.slice(r.start+c,c)},s=null,g=9999999,d=angular.element(n.parent());d.bind("scroll",function(){var t=d[0].scrollHeight-(d[0].clientHeight+d[0].scrollTop);o>t&&0>t-g&&(null!==s&&e.cancel(s),s=e(function(){u(),s=null},l)),g=t})}}}]).directive("pageSelect",function(){return{restrict:"E",template:'<input type="text" class="select-page" ng-model="inputPage" ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 500, \'blur\': 0 } }" ng-change="selectPage(inputPage)">',link:function(e,t,n){e.$watch("currentPage",function(t){e.inputPage=t})}}});var underscore=angular.module("underscore",[]);underscore.factory("_",function(){return window._}),commonApp.directive("ngConfirmClick",[function(){return{restrict:"A",link:function(e,t,n){t.bind("click",function(){var t=n.ngConfirmMessage;t&&confirm(t)&&e.$apply(n.ngConfirmClick)})}}}]),commonApp.directive("ngReallyClick",["$uibModal",function(e){var t=["$scope","$uibModalInstance",function(e,t){e.ok=function(){t.close()},e.cancel=function(){t.dismiss("cancel")}}];return{restrict:"A",scope:{ngReallyClick:"&"},link:function(n,i,a){i.bind("click",function(){var i=a.ngReallyMessage||"Are you sure ?",c='<div class="modal-body">'+i+"</div>";c+='<div class="modal-footer"><button class="btn btn-primary" ng-click="ok()">OK</button><button class="btn btn-warning" ng-click="cancel()" >Close</button></div>';var r=e.open({template:c,controller:t});r.result.then(function(){n.ngReallyClick()},function(){})})}}}]),commonApp.directive("httpSrc",["$http",function(e){return{link:function(t,n,i){function a(){t.objectURL&&URL.revokeObjectURL(t.objectURL)}t.$watch("objectURL",function(e){n.attr("src",e)}),t.$on("$destroy",function(){a()}),i.$observe("httpSrc",function(n){a(),n&&0===n.indexOf("data:")?t.objectURL=n:n&&e.get(n,{responseType:"arraybuffer"}).then(function(e){var n=new Blob([e.data],{type:e.headers("Content-Type")});t.objectURL=URL.createObjectURL(n)})})}}}]),commonApp.directive("syncFocusWith",["$timeout",function(e){return{restrict:"A",scope:{focusValue:"=syncFocusWith"},link:function(e,t,n){e.$watch("focusValue",function(e,n){1==e?t[0].focus():t[0].blur()})}}}]),commonApp.factory("imageService",["$resource",function(e){return e(":path",{},{getUserPic:{method:"GET",params:{path:"api/image/getUserPicture",id:"@id"}}})}]),angular.module("localization",["LocalStorageModule"]).provider("localize",function(){this.languages=["en-US","vi-VN"],this.defaultLanguage="en-US",this.ext="js",this.baseUrl="i18n/";var e=this;this.$get=["$http","$rootScope","$window","$filter","localStorageService",function(t,n,i,a,c){var r={language:"",dictionary:[],url:void 0,resourceFileLoaded:!1,successCallback:function(e){r.dictionary=e,r.resourceFileLoaded=!0,n.$broadcast("localizeResourcesUpdated")},setLanguage:function(e){r.language=this.fallbackLanguage(e),c.cookie.set("language",r.language),r.initLocalizedResources()},fallbackLanguage:function(t){return t=String(t),e.languages.indexOf(t)>-1?t:(t=t.split("-")[0],e.languages.indexOf(t)>-1?t:e.defaultLanguage)},isCurrentLanguage:function(e){var t=this.fallbackLanguage(e);return t==r.language},setUrl:function(e){r.url=e,r.initLocalizedResources()},buildImgUrl:function(e){return t({method:"GET",url:e,cache:!1})},buildUrl:function(t){if(!r.language){var n=c.cookie.get("language");if(n)r.language=n;else{var a,o;a=i.navigator&&i.navigator.userAgent&&(o=i.navigator.userAgent.match(/android.*\W(\w\w)-(\w\w)\W/i))?o[1]:i.navigator.userLanguage||i.navigator.language,r.language=this.fallbackLanguage(a)}}return t+"resources-locale_"+r.language+"."+e.ext},initLocalizedResources:function(){var n=r.url||r.buildUrl(e.baseUrl);t({method:"GET",url:n,cache:!1}).success(r.successCallback).error(function(){var n=e.baseUrl+"resources-locale_default."+e.ext;t({method:"GET",url:n,cache:!1}).success(r.successCallback)})},getLocalizedString:function(e){var t="";if(r.resourceFileLoaded){var n=a("filter")(r.dictionary,function(t){return t.key===e})[0];n||console.log(e),t=n.value?n.value:e}return t}};return r.initLocalizedResources(),r}]}).filter("i18n",["localize",function(e){return function(t){return e.getLocalizedString(t)}}]).directive("i18n",["localize",function(e){var t={restrict:"EAC",updateText:function(t,n,i){var a=n.split("|");if(a.length>=1){var c=e.getLocalizedString(a[0]);if(null!==c&&void 0!==c&&""!==c){if(a.length>1)for(var r=1;r<a.length;r++){var o="{"+(r-1)+"}";c=c.replace(o,a[r])}t[i?"html":"text"](c)}}},link:function(e,n,i){e.$on("localizeResourcesUpdated",function(){t.updateText(n,i.i18n,angular.isDefined(i.i18nHtml))}),i.$observe("i18n",function(e){t.updateText(n,i.i18n,angular.isDefined(i.i18nHtml))})}};return t}]).directive("i18nAttr",["localize",function(e){var t={restrict:"EAC",updateText:function(t,n){var i=n.split("|"),a=e.getLocalizedString(i[0]);if(null!==a&&void 0!==a&&""!==a){if(i.length>2)for(var c=2;c<i.length;c++){var r="{"+(c-2)+"}";a=a.replace(r,i[c])}t.attr(i[1],a)}},link:function(e,n,i){e.$on("localizeResourcesUpdated",function(){t.updateText(n,i.i18nAttr)}),i.$observe("i18nAttr",function(e){t.updateText(n,e)})}};return t}]).directive("i18nImgSrc",["localize",function(e){var t={restrict:"A",link:function(t,n,i){var a=i.i18nImgSrc,c=provider.baseUrl+"/images/"+e.language+"/",r=c+a;e.buildImgUrl(r).success(function(){n[0].src=r}).error(function(){n[0].src=provider.baseUrl+"/images/default/"+a})}};return t}]);